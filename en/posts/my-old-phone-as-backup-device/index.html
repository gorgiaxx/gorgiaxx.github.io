<!DOCTYPE html>
<html lang="en"><meta charset="utf-8"><meta name="generator" content="Hugo 0.154.5"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><meta name="description" content="
Why
I used my Nexus 5 for two years. The battery got worse and worse‚Äîgoing from charging once a day to three times a day. When I was out, even plugged into a power bank, the battery percentage still kept dropping. It ended up dying and going offline by itself multiple times, which delayed a lot of things.
"><title>Nexus 5 Can‚Äôt Retire Yet ‚Äî Be My Backup Phone!&nbsp;&ndash;&nbsp;Gorgias&#39; Blog</title><link rel="stylesheet" href="/css/core.min.363cdd0e3e6340dd0e88b1f21887fb7e53e3129ed31d7f3cf62686d06069621ece79dc5ffb48a77ebba54468e667212f.css" integrity="sha384-NjzdDj5jQN0OiLHyGIf7flPjEp7THX889iaG0GBpYh7Oedxf&#43;0infrulRGjmZyEv"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Nexus 5 Can‚Äôt Retire Yet ‚Äî Be My Backup Phone!" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/en/"><span class="site name">Gorgias' Blog</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/en/categories/">Categories</a><a class="nav item" href="/en/tags/">Tags</a><a class="nav item" href="/en/about/">About</a><a class="nav item" href="/en/links/">Links</a><a class="nav item" href="/zh/posts/my-old-phone-as-backup-device/" title="‰∏≠Êñá">
            <span class="lang-icon">üåê</span>‰∏≠Êñá</a></nav></div></span></div></section><section id="content"><style>
     
    .toc-wrapper {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 9999;
        display: flex;
        flex-direction: column-reverse;
        align-items: flex-end;
        gap: 10px;
    }

     
    .toc-button {
        background-color: #fff;
        color: #333;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        border: 1px solid #ddd;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .toc-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    .toc-button svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
    }

     
    .toc-content-box {
        background: #fff;
        border: 1px solid #eee;
        border-radius: 8px;
        padding: 15px;
        width: 250px;
        max-height: 60vh;
        overflow-y: auto;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        display: none;
         
        font-size: 0.9em;
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.3s, transform 0.3s;
    }

    .toc-content-box.show {
        display: block;
        opacity: 1;
        transform: translateY(0);
    }

    .toc-header {
        font-weight: bold;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 8px;
        margin-bottom: 8px;
        font-size: 1.1em;
    }

     
    #TableOfContents {
        text-align: left;
    }

    #TableOfContents ul,
    #TableOfContents ol {
        list-style: none;
        padding-left: 0;
        margin: 0;
    }

    #TableOfContents li {
        margin: 4px 0;
    }

    #TableOfContents ul ul,
    #TableOfContents ol ol {
        padding-left: 1em;
    }

    #TableOfContents a {
        text-decoration: none;
        color: #555;
        display: block;
        padding: 2px 0;
        transition: color 0.2s;
    }

    #TableOfContents a:hover {
        color: #007bff;
    }

     
    @media (prefers-color-scheme: dark) {
        .toc-button {
            background-color: #333;
            color: #ddd;
            border-color: #555;
        }

        .toc-content-box {
            background-color: #2a2a2a;
            border-color: #444;
            color: #ddd;
        }

        .toc-header {
            border-bottom-color: #444;
        }

        #TableOfContents a {
            color: #aaa;
        }

        #TableOfContents a:hover {
            color: #fff;
        }
    }
</style><div class="article-container"><section class="article header">
    <h1 class="article title">Nexus 5 Can‚Äôt Retire Yet ‚Äî Be My Backup Phone!</h1><p class="article date">Saturday, October 8, 2016<span class="langs"><span class="lang">
                    <a href="/zh/posts/my-old-phone-as-backup-device/" title="‰∏≠Êñá">
                        <span class="lang-icon">üåê</span>‰∏≠Êñá</a>
                </span></span></p></section><article class="article markdown-body"><hr>
<h2 id="why">Why</h2>
<p>I used my Nexus 5 for two years. The battery got worse and worse‚Äîgoing from charging once a day to three times a day. When I was out, even plugged into a power bank, the battery percentage still kept dropping. It ended up dying and going offline by itself multiple times, which delayed a lot of things.
<img loading="lazy"  src="./%e5%ba%95%e9%83%a8.jpg"
        alt=""/></p>
<p>So I bought a Nubia Z11: a 2.5D glass screen, almost bezel-less look, nice design, good performance, decent battery life, and fast charging‚Äîsuitable for daily use.
<img loading="lazy"  src="./%e6%ad%a3%e9%9d%a2.jpg"
        alt=""/></p>
<p><img loading="lazy"  src="./%e8%83%8c%e9%9d%a2.jpg"
        alt=""/></p>
<p><img loading="lazy"  src="./%e4%ba%ae%e5%b1%8f.jpg"
        alt=""/></p>
<p>After the Nexus 5 was left idle, its standby time could surprisingly last more than a week. Now I finally found the real reason the battery became terrible: I had installed too much stuff.
The old phone was simultaneously running Telegram, GAPPS, QQ, WeChat, Alipay, Meituan, Xianyu (and other battery hogs), plus Xposed Framework and Shadowsocks. No wonder it drained like crazy.
So this time I planned to separate usage: Nexus 5 as the ‚Äúwork phone‚Äù, and Nubia Z11 as the ‚Äúlife/personal phone‚Äù.</p>
<p>I also tried to get a SIM card online using information of someone who has the same name as me, but then I realized everything requires real-name verification now: not only holding an ID card, but also a photo of the ID card together with the SIM package.
That made it much harder. I took a look at the real-name verification site and found it was based on a secondary-developed <code>xxshop</code>: the frontend is a store where you can buy SIM cards, and the backend has a review function for verifying users‚Äô identities.</p>
<p><img loading="lazy"  src="./xxshop.png"
        alt="xxshop"/></p>
<p>Uploaded photos are renamed with random strings. If you know the upload directory, it‚Äôs possible to retrieve users‚Äô photos by brute-forcing, but it‚Äôs quite difficult.
Another approach would be to look for vulnerabilities, but the platform was heavily customized and not that easy to find issues in. Also it didn‚Äôt feel worth spending time on it, so I stopped there.</p>
<h2 id="tinkering">Tinkering</h2>
<h3 id="starting-from-scratch">Starting from scratch</h3>
<p>I started working on my backup phone. First I flashed back to the official firmware: <a href="https://developers.google.com/android/nexus/images"target="_blank" rel="noopener noreferrer">Google factory images</a>.
Then I entered fastboot to flash TWRP recovery, and then booted into recovery to flash SuperSU.</p>
<h3 id="install-install-install">Install, install, install</h3>
<p>After entering the system, I installed my proxy/VPN first, and also the most important one: <a href="http://www.coolapk.com/apk/com.coolapk.market"target="_blank" rel="noopener noreferrer">Coolapk</a>.
Must-haves:</p>
<ul>
<li><a href="http://www.coolapk.com/apk/com.wuxianlin.xposedinstaller"target="_blank" rel="noopener noreferrer">Xposed Installer</a></li>
<li><a href="http://www.coolapk.com/apk/com.ceco.marshmallow.gravitybox"target="_blank" rel="noopener noreferrer">GravityBox</a></li>
<li><a href="http://www.coolapk.com/apk/com.oasisfeng.greenify"target="_blank" rel="noopener noreferrer">Greenify</a></li>
<li><a href="http://www.coolapk.com/apk/com.speedsoftware.rootexplorer"target="_blank" rel="noopener noreferrer">Root Explorer</a></li>
</ul>
<p>Because my power button was broken and often got ‚Äústuck‚Äù as if it was being held down, the phone would power off or reboot nonstop. You can also see the SIM slot area cracked (many people‚Äôs phones crack here). So I had to take it apart.
<img loading="lazy"  src="./%e8%8f%8a%e8%8a%b1%e8%a3%82-1024x768.jpg"
        alt=""/></p>
<p>In GravityBox I remapped the volume keys to act as the power key, double-tap the virtual Home button to turn off the screen, and disabled volume changes while listening to music‚Äîso I could also wake the phone while playing music.</p>
<p>I won‚Äôt talk about what Nethunter ships with by default. Here are a few apps I recommend:</p>
<ul>
<li><a href="https://www.zimperium.com/zanti-mobile-penetration-testing"target="_blank" rel="noopener noreferrer">zANTI</a> ‚Äî MITM attacks</li>
<li><a href="http://www.coolapk.com/apk/com.rcreations.WebCamViewerPaid"target="_blank" rel="noopener noreferrer">IP Cam Viewer</a> ‚Äî monitor certain people</li>
<li><a href="http://www.coolapk.com/apk/app.greyshirts.sslcapture"target="_blank" rel="noopener noreferrer">Packet Capture</a> ‚Äî capture packets without root</li>
<li><a href="https://play.google.com/store/apps/details?id=cz.hipercalc.pro&amp;hl=en"target="_blank" rel="noopener noreferrer">HiPER Calc Pro</a> ‚Äî a powerful calculator</li>
<li><a href="https://play.google.com/store/apps/details?id=com.wmspanel.larix_broadcaster&amp;hl=en"target="_blank" rel="noopener noreferrer">Larix Broadcaster</a> ‚Äî live streaming app</li>
<li><a href="https://play.google.com/store/apps/details?id=com.aor.droidedit.pro&amp;hl=en"target="_blank" rel="noopener noreferrer">DroidEdit</a> ‚Äî Sublime on Android, more usable than Jota+</li>
<li><a href="https://play.google.com/store/apps/details?id=com.realvnc.viewer.android&amp;hl=en"target="_blank" rel="noopener noreferrer">VNC Viewer</a></li>
<li><a href="https://play.google.com/store/apps/details?id=com.microsoft.rdc.android&amp;hl=en"target="_blank" rel="noopener noreferrer">Microsoft Remote Desktop</a> ‚Äî two remote desktop apps</li>
</ul>
<p>I‚Äôm an Arch Linux user and I use KDE, so I installed KDE Connect on desktop and the <a href="http://www.coolapk.com/apk/org.kde.kdeconnect_tp"target="_blank" rel="noopener noreferrer">mobile app</a> as a wireless link between my phone and computer.
<img loading="lazy"  src="./KDEC%e6%a1%8c%e9%9d%a2%e7%ab%af.png"
        alt=""/></p>
<p><img loading="lazy"  src="./KDEC%e7%a7%bb%e5%8a%a8%e7%ab%af.jpg"
        alt=""/></p>
<p>Finally, I flashed Kali Nethunter.
I wrote a note last year, <a href="https://blog.gorgiaxx.com/2015/08/kali-nethunter%E5%88%9D%E5%AD%A6%E7%AC%94%E8%AE%B0/"target="_blank" rel="noopener noreferrer">Trying Kali Nethunter</a>, but it no longer applies today.</p>
<h3 id="postgresql-cant-start">postgresql can‚Äôt start</h3>
<p>After installing Nethunter, I found the <code>postgresql</code> service couldn‚Äôt start:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@kali:~# service postgresql start
</span></span><span class="line"><span class="cl"><span class="o">[</span>....<span class="o">]</span> Starting PostgreSQL 9.4 database server: main<span class="o">[</span>....<span class="o">]</span> The PostgreSQL server failed to start. Please check the log output: 2016-10-08 12:18:03 UTC <span class="o">[</span>5618-1<span class="o">]</span> FATAL: could not create shared memory segment: Function not implemented 2016-10-08 12:18:03 UTC <span class="o">[</span>561<span class="o">[</span>FAILDETAIL: Failed system call was shmget<span class="o">(</span><span class="nv">key</span><span class="o">=</span>5432001, <span class="nv">size</span><span class="o">=</span>40, 03600<span class="o">)</span>. ... failed!
</span></span></code></pre></div><p>The error was from <code>shmget</code>, so the shared-memory part was broken. My first guess was that the configured value might be too small.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@kali:~# cat /proc/sys/kernel/shmmax
</span></span><span class="line"><span class="cl">cat: /proc/sys/kernel/shmmax: No such file or directory
</span></span></code></pre></div><p>I checked the kernel and found this sysctl doesn‚Äôt exist at all, which was awkward. After Googling a lot, I finally saw the same situation in <a href="https://github.com/offensive-security/kali-nethunter/issues/530"target="_blank" rel="noopener noreferrer">an Offensive Security GitHub issue</a>. They already patched it, but the official release hadn‚Äôt changed yet, so you needed to build the package yourself.</p>
<p>So I started building it. In fact, it doesn‚Äôt have to be a Nexus 5 to flash Nethunter.
Following the <a href="https://github.com/offensive-security/kali-nethunter/wiki/Building-Nethunter"target="_blank" rel="noopener noreferrer">official wiki</a> step by step:
Download the Nethunter source and enter the directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone https://github.com/offensive-security/kali-nethunter
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> kali-nethunter/nethunter-installer
</span></span></code></pre></div><p>You can only build with Python 2 here. After reading the instructions, I ran the following command. The parameters are roughly: device codename <code>hammerhead</code> (Nexus 5), target system Marshmallow, and build kernel only.
Since I had already installed it once, this time I only built the kernel, and added a custom release name‚Äîlet‚Äôs call it <code>RBQ</code>!</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">gorgias@3vil ~/g/k/nethunter-installer<span class="p">&amp;</span>gt<span class="p">;</span> python2 build.py -d hammerhead -m -k -r RBQ
</span></span><span class="line"><span class="cl">Kernel: Copying common files...
</span></span><span class="line"><span class="cl">Kernel: Copying armhf arch specific common files...
</span></span><span class="line"><span class="cl">Kernel: Copying boot-patcher files...
</span></span><span class="line"><span class="cl">Kernel: Copying armhf arch specific boot-patcher files...
</span></span><span class="line"><span class="cl">Kernel: Configuring installer script <span class="k">for</span> hammerhead
</span></span><span class="line"><span class="cl">Kernel: Configuring boot-patcher script <span class="k">for</span> hammerhead
</span></span><span class="line"><span class="cl">Found kernel image at: devices/marshmallow/hammerhead/zImage-dtb
</span></span><span class="line"><span class="cl">Creating ZIP file: kernel-nethunter-hammerhead-marshmallow-RBQ.zip
</span></span><span class="line"><span class="cl">Added: zImage-dtb
</span></span><span class="line"><span class="cl">Added: boot-patcher.sh
</span></span><span class="line"><span class="cl">Added: env.sh
</span></span><span class="line"><span class="cl">Added: patch.d-env
</span></span><span class="line"><span class="cl">Added: META-INF/com/google/android/update-binary
</span></span><span class="line"><span class="cl">Added: META-INF/com/google/android/updater-script
</span></span><span class="line"><span class="cl">Added: ramdisk-patch/init.nethunter.rc
</span></span><span class="line"><span class="cl">Added: ramdisk-patch/sbin/dvmediarevert
</span></span><span class="line"><span class="cl">Added: ramdisk-patch/sbin/media_profiles.xml
</span></span><span class="line"><span class="cl">Added: ramdisk-patch/sbin/dvbootscript.sh
</span></span><span class="line"><span class="cl">Added: ramdisk-patch/sbin/hostapd
</span></span><span class="line"><span class="cl">Added: tools/busybox
</span></span><span class="line"><span class="cl">Added: tools/unpackbootimg
</span></span><span class="line"><span class="cl">Added: tools/freespace.sh
</span></span><span class="line"><span class="cl">Added: tools/installbusybox.sh
</span></span><span class="line"><span class="cl">Added: tools/mkbootimg
</span></span><span class="line"><span class="cl">Added: tools/lz4
</span></span><span class="line"><span class="cl">Added: patch.d/01-ramdisk-patch
</span></span><span class="line"><span class="cl">Added: patch.d/02-no-verity-opt-encrypt
</span></span><span class="line"><span class="cl">Added: system/xbin/hid-keyboard
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/htc_9271.fw
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/ar9170-1.fw
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/ar9170-2.fw
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/rt2870.bin
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/rt3070.bin
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/rt73.bin
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/rt2561.bin
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/rt2860.bin
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/htc_7010.fw
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/carl9170-1.fw
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211_ub
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211b_uph
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211_ur
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211b_uphm
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211b_ur
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211_uph
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211_uphr
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211_uphm
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211b_uphr
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/zd1211/zd1211b_ub
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/rtlwifi/rtl8192cufw.bin
</span></span><span class="line"><span class="cl">Added: system/etc/firmware/rtlwifi/rtl8188efw.bin
</span></span><span class="line"><span class="cl">Created kernel installer: kernel-nethunter-hammerhead-marshmallow-RBQ.zip
</span></span></code></pre></div><p>After building, a file will be generated in the directory. I transferred it to the phone via KDE Connect, rebooted into recovery, and flashed it. Done!!
<img loading="lazy"  src="./%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90.png"
        alt=""/></p>
<p>The latest Nethunter uses the <code>kali-rolling</code> source. If you fail to update the sources or download packages, change your sources to:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">deb http://http.kali.org/kali kali-rolling main contrib non-free
</span></span><span class="line"><span class="cl">deb-src http://http.kali.org/kali kali-rolling main contrib non-free
</span></span></code></pre></div></article><section class="article labels"><a class="category" href=/en/categories/cybersecurity/>Cybersecurity</a><a class="category" href=/en/categories/tinkering/>Tinkering</a><a class="tag" href=/en/tags/kali/>kali</a><a class="tag" href=/en/tags/nethunter/>nethunter</a><a class="tag" href=/en/tags/backup-phone/>backup-phone</a></section>
</div>

<div class="toc-wrapper">
    <div class="toc-content-box" id="toc-content-box">
        <div class="toc-header">Table of Contents</div>
        <nav id="TableOfContents">
  <ol>
    <li><a href="#why">Why</a></li>
    <li><a href="#tinkering">Tinkering</a>
      <ol>
        <li><a href="#starting-from-scratch">Starting from scratch</a></li>
        <li><a href="#install-install-install">Install, install, install</a></li>
        <li><a href="#postgresql-cant-start">postgresql can‚Äôt start</a></li>
      </ol>
    </li>
  </ol>
</nav>
    </div>
    <div class="toc-button" onclick="toggleTOC()" title="">
        
        <svg viewBox="0 0 24 24">
            <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"></path>
        </svg>
    </div>
</div>

<script>
    function toggleTOC() {
        const tocBox = document.getElementById('toc-content-box');
        if (tocBox.classList.contains('show')) {
            tocBox.classList.remove('show');
            
            
            
            
            
            setTimeout(() => {
                tocBox.style.display = 'none';
            }, 300); 
        } else {
            tocBox.style.display = 'block';
            
            void tocBox.offsetWidth;
            tocBox.classList.add('show');
        }
    }

    
    document.addEventListener('click', function (event) {
        const wrapper = document.querySelector('.toc-wrapper');
        const tocBox = document.getElementById('toc-content-box');
        if (wrapper && !wrapper.contains(event.target) && tocBox.classList.contains('show')) {
            toggleTOC();
        }
    });
</script><div class="article bottom"><section class="article navigation"><p><a class="link" href="/en/posts/crack-milk-card-with-acr122u-on-arch-linux/"><span class="iconfont icon-article"></span>Cracking a Milk Membership Card with an ACR122U on Arch Linux</a></p><p><a class="link" href="/en/posts/lenovo-y410p-bios-recovery-notes/"><span class="iconfont icon-article"></span>Lenovo Y410p BIOS Recovery Notes</a></p></section></div></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">2015 - 2026 Gorgias' Blog. </p><p class="license">
        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">
            <img alt="CC BY-NC-SA" loading="lazy" src="/images/by-nc.svg" style="vertical-align: middle; height: 1.2em; margin: 0 0.2em;" />
            CC BY-NC-SA 4.0
        </a>
        (Attribution-NonCommercial-ShareAlike).
    </p><p class="powerby"><span>Powered&nbsp;by&nbsp;</span><a href="https://gohugo.io" 
        target="_blank" rel="noopener noreferrer">Hugo</a><span>&nbsp;&amp;&nbsp;</span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank" rel="noopener noreferrer">Notepadium</a></p></div></section></body>

</html>